<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${vo2.cos_name} + ' ìƒì„¸ í˜ì´ì§€'">ì½”ìŠ¤ ìƒì„¸ í˜ì´ì§€</title>
    <link rel="stylesheet" th:href="@{/css/board.css}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <style>
        .carousel-container { height: 40vh; }
        .carousel-inner img { height: 100%; object-fit: cover; }
        .bottom-section { height: auto; }
        .corner-text {
            position: absolute; bottom: 10px; left: 10px;
            background: rgba(0,0,0,0.6); color: white;
            padding: 5px 10px; border-radius: 5px; font-size: large;
        }
        .review-box {
            border-left: 1px solid #ccc;
            padding-left: 20px;
        }
        .review-list { height: 200px; overflow-y: auto; }
    </style>
</head>
<body th:replace="~{layout::layout}">

<div th:fragment="content" class="container-fluid">
    <br>
    <br>
    <br>
    <br>
    <br>
    <h1 class="mt-4 mb-4" th:text="${vo2.cos_name}">ì½”ìŠ¤ ì´ë¦„</h1>

    <!-- ì´ë¯¸ì§€ ìºëŸ¬ì…€ -->
    <div class="carousel-container mb-4">
        <div id="cosCarousel" class="carousel slide h-100" data-ride="carousel">
            <div class="carousel-inner h-100">
                <div class="carousel-item active position-relative h-100">
                    <img th:src="@{'/uploadimgPath/' + ${vo2.img}}" class="d-block w-100" th:alt="${vo2.cos_name}">
                    <span class="corner-text" th:text="${vo2.city}">ë„ì‹œ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ìƒì„¸ ë‚´ìš© -->
    <div class="row bottom-section">
        <div class="col-md-8">
            <h3>ì½”ìŠ¤ ì„¤ëª…</h3>
            <p th:text="${vo2.info}">ì½”ìŠ¤ ìƒì„¸ ì„¤ëª…</p>

            <ul class="list-group mt-3">
                <li class="list-group-item">ğŸ ê±°ë¦¬: <span th:text="${vo2.km}">0km</span></li>
                <li class="list-group-item">ğŸ•’ ì˜ˆìƒ ì‹œê°„: <span th:text="${vo2.cos_time}">0</span> ë¶„</li>
                <li class="list-group-item">ğŸ“ ë„ì‹œ: <span th:text="${vo2.city}">ë„ì‹œëª…</span></li>
                <li class="list-group-item">ğŸ¯ ë‚œì´ë„: <span th:text="${vo2.level}">ì´ˆê¸‰</span></li>
                <li class="list-group-item">ğŸ·ï¸ íƒœê·¸: <span th:text="${vo2.tag}">#ë¼ì´ë”©</span></li>
            </ul>
        </div>

        <!-- ë¦¬ë·° ë°•ìŠ¤ -->
        <div class="col-md-4 review-box">
            <h4>ì‘ì„±ëœ ë¦¬ë·°</h4>
            <div class="review-list" style="max-width: 600px; margin: 0 auto;">
                <div th:each="review : ${reviews}"
                     style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); background: #fafafa;">

                    <p style="margin: 0 0 8px 0; font-weight: bold; color: #333;">
                        <span th:text="${review.nickname}"></span>
                        <span th:text="'(' + ${review.grade} + 'ì )'"
                              style="color: #666; font-weight: normal;"></span>
                    </p>

                    <p style="margin: 0; color: #555; line-height: 1.4em;" th:text="${review.content}"></p>
                </div>
            </div>
            <div class="text-center mt-3">
                <div th:if="${param.message == null}">
                    <a th:href="@{'/cosreview/insert'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì½”ìŠ¤ë¦¬ë·°ì‘ì„±</a>
                    <a th:href="@{'/coslike/insert'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì°œí•˜ê¸°</a>
                </div>
                <div th:if="${#strings.equals(param.message, 'like')}">
                    <a th:href="@{'/cosreview/insert'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì½”ìŠ¤ë¦¬ë·°ì‘ì„±</a>
                    <a th:href="@{'/coslike/insert'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì°œí•˜ê¸°</a>
                </div>
                <div th:if="${#strings.equals(param.message, 'liked')}">
                    <a th:href="@{'/cosreview/insert'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì½”ìŠ¤ë¦¬ë·°ì‘ì„±</a>
                    <a th:href="@{'/coslike/delete'(cos_num=${vo2.cos_num})}" class="btn btn-primary">ì°œì·¨ì†Œ</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
</body>
</html>
